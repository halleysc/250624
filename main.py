import streamlit as st
import random

# st.set_page_config()는 반드시 Streamlit 앱에서 가장 먼저 호출되는 Streamlit 명령이어야 합니다.
# 따라서 import 문 바로 다음에 위치시킵니다.
st.set_page_config(page_title="✨MBTI 기반 맞춤형 직업 탐색기✨", layout="centered", icon="💼")

def get_job_recommendations(mbti_type):
    """
    MBTI 유형에 따른 직업 추천과 설명을 반환하는 함수
    """
    recommendations = {
        "ISTJ": {
            "title": "✅ 현실적이고 책임감 강한 당신, '세상의 소금' ISTJ!",
            "jobs": [
                ("회계사", "정확한 숫자 계산과 규율 준수를 중요하게 여기는 당신에게 완벽한 직업이에요."),
                ("공무원", "안정적인 환경에서 체계적인 업무를 선호하며, 사회에 기여하는 보람을 느낄 수 있어요."),
                ("데이터 분석가", "꼼꼼하고 논리적인 분석 능력을 활용하여 복잡한 데이터를 정리하고 의미를 도출해요."),
                ("경찰관/소방관", "사명감을 가지고 규칙을 준수하며 사회 질서 유지에 기여하는 데 보람을 느껴요."),
                ("프로그래머", "논리적인 사고와 문제 해결 능력을 바탕으로 시스템을 구축하고 유지보수하는 데 능숙해요.")
            ],
            "description": "ISTJ는 논리적이고 체계적이며, 맡은 일을 끝까지 책임지는 든든한 유형이에요. 과거의 경험을 바탕으로 현실적인 결정을 내리며, 전통과 규칙을 중시합니다. 신뢰할 수 있는 '세상의 소금' 같은 존재죠."
        },
        "ISFJ": {
            "title": "💖 따뜻하고 헌신적인 당신, '수호자' ISFJ!",
            "jobs": [
                ("간호사", "타인을 보살피는 데 큰 보람을 느끼고, 세심한 배려로 환자들에게 안정감을 줘요."),
                ("사회복지사", "어려움에 처한 이들을 돕고 지원하며, 공동체에 긍정적인 영향을 미쳐요."),
                ("교사", "학생들의 성장을 돕고, 안정적이고 따뜻한 환경에서 교육하는 데 능숙해요."),
                ("사서", "조용하고 체계적인 환경에서 정보를 정리하고 사람들에게 도움을 주는 일을 선호해요."),
                ("인사 담당자", "직원들의 복지를 살피고, 조직 내 갈등을 중재하며 안정적인 분위기를 만들어요.")
            ],
            "description": "ISFJ는 온화하고 헌신적이며, 주변 사람들을 잘 챙기는 따뜻한 마음을 가진 유형이에요. 세심하고 책임감이 강하며, 타인의 필요를 잘 알아차리고 도와주는 데 능숙합니다. '수호자'라는 별명처럼 묵묵히 자신의 역할을 다하죠."
        },
        "ISTP": {
            "title": "🛠️ 대담하고 실용적인 당신, '만능 재주꾼' ISTP!",
            "jobs": [
                ("엔지니어", "복잡한 기계를 다루고 문제를 해결하는 데 탁월한 능력을 발휘해요."),
                ("정비사", "손으로 직접 만들고 고치는 것을 좋아하며, 실제적인 문제 해결에 능숙해요."),
                ("소방관", "위기 상황에서 침착하게 문제를 분석하고 즉각적으로 행동하는 데 강해요."),
                ("파일럿", "정교한 기계 조작과 빠른 상황 판단 능력이 요구되는 분야에서 빛을 발해요."),
                ("프로게이머", "빠른 반사 신경과 전략적 사고로 게임 환경을 분석하고 최적의 플레이를 찾아요.")
            ],
            "description": "ISTP는 호기심이 많고 분석적이며, 문제 해결 능력이 뛰어난 실용주의자예요. 직접 경험하고 만져보면서 배우는 것을 선호하며, 위기 상황에서도 침착하게 대처하는 '만능 재주꾼'입니다."
        },
        "ISFP": {
            "title": "🎨 유연하고 예술적인 당신, '자유로운 영혼' ISFP!",
            "jobs": [
                ("디자이너", "자신의 예술적 감각과 창의성을 발휘하여 아름다운 결과물을 만들어내요."),
                ("예술가/음악가", "내면의 감정을 표현하고 타인에게 영감을 주는 활동에 만족감을 느껴요."),
                ("요리사", "오감을 활용하여 새로운 맛을 창조하고, 사람들에게 즐거움을 선사해요."),
                ("수의사/동물 조련사", "동물들과 교감하고 그들을 돌보는 데 따뜻한 마음과 인내심을 발휘해요."),
                ("자유로운 직업 (프리랜서 등)", "규칙에 얽매이지 않고 자신의 페이스에 맞춰 일하는 것을 선호해요.")
            ],
            "description": "ISFP는 온화하고 겸손하며, 미적 감각이 뛰어난 예술가 기질이 다분한 유형이에요. 현재를 즐기고 자유로운 분위기를 선호하며, 자신의 가치관에 따라 움직이는 '자유로운 영혼'입니다."
        },
        "INTJ": {
            "title": "🧠 통찰력 있고 전략적인 당신, '과학자' INTJ!",
            "jobs": [
                ("과학자/연구원", "복잡한 이론을 탐구하고 새로운 지식을 발견하는 데 몰두해요."),
                ("교수", "심오한 지식을 전달하고 학생들의 지적 성장을 돕는 데 보람을 느껴요."),
                ("컨설턴트", "논리적인 분석을 통해 기업의 문제를 해결하고 전략적인 방안을 제시해요."),
                ("건축가", "추상적인 아이디어를 구체적인 설계로 구현하며, 체계적인 계획을 수립해요."),
                ("전략 기획자", "미래를 내다보는 통찰력으로 장기적인 계획을 수립하고 실행해요.")
            ],
            "description": "INTJ는 독립적이고 분석적이며, 미래를 계획하고 실행하는 데 뛰어난 능력을 가진 유형이에요. 복잡한 문제를 해결하고 새로운 시스템을 구축하는 것을 즐기는 '전략가'이자 '과학자'입니다."
        },
        "INFJ": {
            "title": "🕊️ 통찰력 있고 영감적인 당신, '예언자' INFJ!",
            "jobs": [
                ("상담사/심리학자", "타인의 감정을 깊이 이해하고 공감하며, 내면의 성장을 돕는 데 능숙해요."),
                ("작가", "자신의 깊은 통찰과 이상을 글로 표현하여 사람들에게 영감을 줘요."),
                ("성직자/영적 지도자", "사람들의 정신적 성장을 돕고, 의미 있는 삶을 살도록 이끌어요."),
                ("인사 컨설턴트", "조직 내 개인의 성장과 발전을 돕고, 긍정적인 기업 문화를 만드는 데 기여해요."),
                ("사회 운동가", "자신이 믿는 가치를 위해 헌신하고, 사회 변화를 이끄는 데 적극적이에요.")
            ],
            "description": "INFJ는 통찰력이 뛰어나고 직관적이며, 이상적인 세상을 꿈꾸는 유형이에요. 타인의 감정에 깊이 공감하고, 의미 있는 관계를 추구하며, 세상을 더 나은 곳으로 만들고자 노력하는 '예언자' 같은 존재입니다."
        },
        "INTP": {
            "title": "💡 논리적이고 창의적인 당신, '아이디어 뱅크' INTP!",
            "jobs": [
                ("연구원", "복잡한 이론을 탐구하고 새로운 지식을 발견하는 데 열정을 느껴요."),
                ("프로그래머/개발자", "논리적인 사고로 시스템을 설계하고 문제를 해결하는 데 탁월해요."),
                ("철학자/대학교수", "추상적인 개념을 탐구하고 깊이 있는 질문을 던지는 데 능숙해요."),
                ("발명가", "새로운 아이디어를 구상하고 그것을 현실로 만드는 데 흥미를 느껴요."),
                ("데이터 과학자", "방대한 데이터를 분석하고 숨겨진 패턴을 찾아내는 데 능숙해요.")
            ],
            "description": "INTP는 논리적이고 분석적이며, 새로운 아이디어와 이론을 탐구하는 것을 즐기는 유형이에요. 지적인 호기심이 많고 독립적이며, 복잡한 문제를 해결하는 데 뛰어난 '아이디어 뱅크'입니다."
        },
        "INFP": {
            "title": "🌿 이상적이고 창조적인 당신, '몽상가' INFP!",
            "jobs": [
                ("작가/시인", "자신의 풍부한 감성과 상상력을 글로 표현하여 독자에게 감동을 줘요."),
                ("예술가/음악가", "내면의 아름다움을 표현하고 사람들에게 영감을 주는 활동에 만족감을 느껴요."),
                ("상담사/심리치료사", "타인의 감정을 깊이 이해하고 공감하며, 성장을 돕는 데 보람을 느껴요."),
                ("사서", "조용하고 평화로운 환경에서 책과 함께하며 사람들에게 지식을 제공해요."),
                ("동물 보호 활동가", "자신이 믿는 가치를 위해 헌신하고, 약한 존재를 보호하는 데 적극적이에요.")
            ],
            "description": "INFP는 이상적이고 감성적이며, 진정한 자아를 찾아가는 데 몰두하는 유형이에요. 타인의 감정에 깊이 공감하고, 세상을 더 아름답게 만들고자 노력하는 '몽상가'입니다."
        },
        "ESTJ": {
            "title": "💼 체계적이고 리더십 있는 당신, '경영자' ESTJ!",
            "jobs": [
                ("경영자/관리자", "조직을 효율적으로 운영하고 목표를 달성하는 데 뛰어난 능력을 발휘해요."),
                ("공무원 (고위직)", "체계적인 행정 처리와 리더십으로 사회 시스템을 관리해요."),
                ("영업 관리", "목표 지향적이고 현실적인 접근으로 팀을 이끌고 성과를 창출해요."),
                ("변호사/판사", "논리적인 사고와 확고한 원칙을 바탕으로 법률 문제를 해결해요."),
                ("군인/경찰 간부", "규율과 질서를 중요하게 여기며, 리더십으로 조직을 이끌어요.")
            ],
            "description": "ESTJ는 현실적이고 논리적이며, 조직을 이끌고 목표를 달성하는 데 능숙한 유형이에요. 책임감이 강하고 추진력이 있어 '경영자'나 '관리자'로서 뛰어난 역량을 발휘합니다."
        },
        "ESFJ": {
            "title": "🤝 사교적이고 친절한 당신, '친선 도모자' ESFJ!",
            "jobs": [
                ("영업원/마케터", "사람들과 소통하고 관계를 맺는 데 탁월하며, 고객의 니즈를 잘 파악해요."),
                ("교사", "학생들과 따뜻하게 교류하며, 그들의 성장을 돕는 데 큰 보람을 느껴요."),
                ("사회복지사", "어려움에 처한 이들을 돕고, 지역 사회에 긍정적인 영향을 미쳐요."),
                ("행사 기획자", "사람들을 한데 모으고 즐거운 경험을 제공하는 데 능숙해요."),
                ("간호사/의료 코디네이터", "환자들에게 친절하게 다가가고, 의료진과 환자 사이의 소통을 원활하게 해요.")
            ],
            "description": "ESFJ는 사교적이고 협력적이며, 사람들과 어울리는 것을 좋아하는 유형이에요. 타인의 감정에 민감하고 배려심이 깊어 '친선 도모자'나 '사교계의 중심' 같은 역할을 합니다."
        },
        "ESTP": {
            "title": "🚀 활동적이고 에너제틱한 당신, '모험가' ESTP!",
            "jobs": [
                ("사업가", "빠른 판단력과 실행력으로 새로운 기회를 포착하고 도전해요."),
                ("경찰관/소방관", "위기 상황에서 침착하고 신속하게 행동하며, 실제적인 문제 해결에 능숙해요."),
                ("영업원", "적극적으로 고객을 만나고 설득하며, 활동적인 업무를 선호해요."),
                ("스포츠 선수/코치", "경쟁을 즐기고 즉흥적인 판단으로 최고의 성과를 내는 데 능숙해요."),
                ("트레이너/강사", "활기찬 에너지로 사람들을 이끌고 동기를 부여하는 데 탁월해요.")
            ],
            "description": "ESTP는 에너지가 넘치고 활동적이며, 즉흥적인 상황 대처 능력이 뛰어난 유형이에요. 새로운 경험을 추구하고, 문제 발생 시 즉각적으로 행동하는 '모험가'입니다."
        },
        "ESFP": {
            "title": "🌟 열정적이고 자유로운 당신, '연예인' ESFP!",
            "jobs": [
                ("연예인/공연 예술가", "자신의 매력을 발산하고 사람들에게 즐거움을 선사하는 데 타고났어요."),
                ("이벤트 플래너", "창의적이고 활기찬 에너지로 사람들을 위한 즐거운 행사를 기획해요."),
                ("유치원 교사", "아이들과 친밀하게 교류하며, 그들의 흥미를 이끌어내는 데 능숙해요."),
                ("서비스업 종사자 (호텔리어, 바리스타 등)", "친절하고 사교적인 태도로 고객들에게 즐거운 경험을 제공해요."),
                ("강사/레크레이션 강사", "활기찬 분위기를 만들고 사람들에게 동기를 부여하는 데 능숙해요.")
            ],
            "description": "ESFP는 사교적이고 낙천적이며, 현재를 즐기고 사람들과 어울리는 것을 좋아하는 유형이에요. 타고난 유머 감각과 매력으로 주변을 즐겁게 만드는 '연예인' 같은 존재입니다."
        },
        "ENTJ": {
            "title": "👑 단호하고 비전 있는 당신, '지도자' ENTJ!",
            "jobs": [
                ("기업가/CEO", "큰 비전을 가지고 조직을 이끌며, 목표 달성을 위해 강력한 추진력을 발휘해요."),
                ("경영 컨설턴트", "복잡한 비즈니스 문제를 분석하고 혁신적인 해결책을 제시해요."),
                ("변호사/검사", "논리적인 사고와 설득력으로 자신의 주장을 펼치고 리더십을 발휘해요."),
                ("정치인", "대중을 이끌고 사회의 변화를 주도하는 데 강한 열정을 보여요."),
                ("프로젝트 매니저", "복잡한 프로젝트를 계획하고 실행하며, 팀을 성공적으로 이끌어요.")
            ],
            "description": "ENTJ는 단호하고 결단력이 있으며, 타고난 리더십으로 조직을 이끌고 목표를 달성하는 데 능숙한 유형이에요. 효율성을 중시하고 도전적인 과제를 즐기는 '지도자'입니다."
        },
        "ENFJ": {
            "title": "🗣️ 카리스마 있고 열정적인 당신, '선도자' ENFJ!",
            "jobs": [
                ("리더/팀장", "사람들을 격려하고 동기를 부여하며, 팀의 잠재력을 최대한 이끌어내요."),
                ("교사/교수", "학생들의 성장을 돕고, 영감을 주며 긍정적인 영향을 미치는 데 보람을 느껴요."),
                ("상담사/코치", "타인의 고민을 경청하고 공감하며, 그들이 목표를 달성하도록 지원해요."),
                ("인사 관리자", "직원들의 잠재력을 개발하고, 긍정적인 조직 문화를 만드는 데 기여해요."),
                ("강사/연설가", "자신의 비전을 공유하고 사람들에게 영감을 주며, 강력한 메시지를 전달해요.")
            ],
            "description": "ENFJ는 사교적이고 카리스마 있으며, 사람들을 이끌고 긍정적인 변화를 만들어내는 데 능숙한 유형이에요. 타인의 성장을 돕고, 조화로운 관계를 추구하는 '선도자'입니다."
        },
        "ENTP": {
            "title": "🌪️ 기발하고 똑똑한 당신, '변론가' ENTP!",
            "jobs": [
                ("창업가", "새로운 아이디어를 끊임없이 구상하고, 비즈니스 기회를 포착하여 실행해요."),
                ("컨설턴트", "다양한 문제를 분석하고 혁신적인 해결책을 제시하는 데 능숙해요."),
                ("변호사", "논리적인 사고와 뛰어난 언변으로 자신의 주장을 효과적으로 펼쳐요."),
                ("마케터/광고 기획자", "창의적인 아이디어로 사람들의 흥미를 끌고, 새로운 트렌드를 만들어내요."),
                ("발명가", "기존의 틀을 깨고 새로운 것을 만들어내는 데 탁월한 능력을 발휘해요.")
            ],
            "description": "ENTP는 호기심이 많고 논리적이며, 새로운 아이디어와 도전을 즐기는 유형이에요. 뛰어난 문제 해결 능력과 통찰력으로 '변론가'이자 '아이디어 뱅크' 역할을 합니다."
        },
        "ENFP": {
            "title": "☀️ 활기차고 영감을 주는 당신, '활동가' ENFP!",
            "jobs": [
                ("크리에이터/유튜버", "자신의 개성을 살려 콘텐츠를 만들고, 사람들에게 즐거움을 선사해요."),
                ("마케터/홍보 전문가", "창의적인 아이디어로 제품이나 서비스를 매력적으로 알리고 사람들과 소통해요."),
                ("강사/트레이너", "열정적인 에너지로 사람들에게 동기를 부여하고 긍정적인 변화를 이끌어요."),
                ("상담사/코치", "타인의 감정에 공감하고, 그들이 잠재력을 발휘하도록 돕는 데 보람을 느껴요."),
                ("여행 작가/블로거", "새로운 경험을 탐험하고, 자신의 경험을 통해 사람들에게 영감을 줘요.")
            ],
            "description": "ENFP는 열정적이고 창의적이며, 새로운 가능성을 탐색하고 사람들과 교류하는 것을 좋아하는 유형이에요. 긍정적인 에너지로 주변을 밝게 만드는 '활동가'입니다."
        }
    }
    return recommendations.get(mbti_type, {
        "title": "😅 이런! 아직 이 유형은 준비 중이에요!",
        "jobs": [("다른 유형을 선택해주세요.", "다양한 유형의 매력을 탐험해 보세요!")],
        "description": "죄송하지만, 해당 MBTI 유형에 대한 정보는 아직 준비되지 않았어요. 다른 유형을 선택하여 새로운 직업 추천을 받아보세요!"
    })

# --- Streamlit 앱 구성 ---
st.title("🌟 MBTI 유형별 맞춤형 직업 탐색기 🌟")
st.markdown("""
<style>
.stSelectbox {
    margin-bottom: 25px;
}
.stButton {
    margin-top: 30px;
    padding: 10px 20px;
    font-size: 18px;
    border-radius: 8px;
}
.stInfo {
    font-size: 15px;
    padding: 10px;
}
h3 {
    margin-top: 30px;
    color: #4CAF50;
}
</style>
""", unsafe_allow_html=True)

st.write("당신의 MBTI 유형을 선택하면, 당신의 성격에 딱 맞는 직업과 함께 흥미로운 설명을 추천해 드릴게요! 🧐")

# MBTI 유형 선택 드롭다운
mbti_options = [
    "--- MBTI 유형을 선택해주세요 ---", "ISTJ", "ISFJ", "ISTP", "ISFP", "INTJ", "INFJ",
    "INTP", "INFP", "ESTJ", "ESFJ", "ESTP", "ESFP", "ENTJ",
    "ENFJ", "ENTP", "ENFP"
]
selected_mbti = st.selectbox("🌈 당신의 MBTI 유형은 무엇인가요?", mbti_options)

if st.button("✨ 내게 딱 맞는 직업 추천받기! ✨"):
    if selected_mbti == "--- MBTI 유형을 선택해주세요 ---":
        st.warning("⚠️ MBTI 유형을 선택해주셔야 직업 추천을 받을 수 있어요! 😅", icon="⚠️")
    else:
        # 풍선 효과! 🎈
        st.balloons()

        mbti_info = get_job_recommendations(selected_mbti)

        st.subheader(mbti_info["title"])
        st.write(f"👉 **{mbti_info['description']}**")

        st.markdown("---")
        st.subheader("📋 추천 직업 목록과 왜 잘 맞는지 알아볼까요?")

        for job_name, job_desc in mbti_info["jobs"]:
            st.markdown(f"#### 💼 **{job_name}**")
            st.write(f"_{job_desc}_")
            st.markdown("---")

        st.info("💡 이 추천은 MBTI 유형의 일반적인 특성을 기반으로 하며, 당신의 개인적인 흥미, 능력, 그리고 경험에 따라 가장 적합한 직업은 달라질 수 있음을 기억해주세요! 😉")

st.markdown("""
<br>
<hr style="border: 1px solid #eee;">
<div style="text-align: center; color: #777;">
    <p>본 추천기는 MBTI 특성에 대한 이해를 돕기 위해 제작되었습니다. 🚀</p>
    <p>더 깊이 있는 직업 탐색은 전문가와 상담하거나 다양한 직무 경험을 통해 이루어질 수 있습니다. 🌟</p>
</div>
""", unsafe_allow_html=True)
